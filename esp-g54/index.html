<!DOCTYPE html>
<html>
<head>
  <title>Bridge Application Control Interface</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<h1>G54 Bridge ACI</h1>

<div class="section">
  <h2>Bridge Status</h2>
  <p><span class="status-light green"></span> Bridge Closed</p> 
  <p><span class="status-light red"></span> Bridge Open</p>
  <p><span class="status-light yellow"></span> Bridge Moving</p>
</div>
<!-- ESP32 control buttons -->
<div class="section">
  <h2>ESP32 Testing Controls</h2>
  <button onclick="startMotor()" style="background-color: lightgreen;">Motor Start</button>
  <button onclick="stopMotor()" style="background-color: lightblue;">Motor Stop</button>
  <button onclick="ledOn()">LED On</button>
  <button onclick="ledOff()">LED Off</button>
  <button onclick="buckOn()">Buck On</button>
  <button onclick="buckOff()">Buck Off</button>
  <button onclick="checkLimits()">Check Limit Switches</button>
  <button onclick="getUltrasonic1()">Ultrasonic 1</button>
  <button onclick="getUltrasonic2()">Ultrasonic 2</button>
</div>

<div class="section">
  <h2>Sensors</h2>
  <p>Boat Detected: <span class="status-light green"></span></p>
  <p>Car Detected: <span class="status-light red"></span></p>
  <p>Pedestrian Detected: <span class="status-light yellow"></span></p>
</div>

<div class="section">
  <h2>Bridge Animation</h2>
  <div class="bridge-area">
    <div class="bridge-road" id="bridge"></div>
    <div class="boat"></div>
    <div class="river"></div>
  </div>
</div>

<script>
  const ESP32_IP = "http://192.168.0.24";

  // ---- ESP32 hardware controls ----
  function startMotor() {
      fetch(`${ESP32_IP}/motor/start`)
        .then(r => r.text())
        .then(console.log)
        .catch(err => console.error("Error:", err));
    }

    function stopMotor() {
      fetch(`${ESP32_IP}/motor/stop`)
        .then(r => r.text())
        .then(console.log)
        .catch(err => console.error("Error:", err));
    }

  function ledOn() { 
    fetch(`${ESP32_IP}/led/on`)
      .then(r => r.text())
      .then(console.log)
      .catch(err => console.error("Error:", err));
  }

  function ledOff() {
    fetch(`${ESP32_IP}/led/off`)
      .then(r => r.text())
      .then(console.log)
      .catch(err => console.error("Error:", err));
  }

  function buckOn() {
    fetch(`${ESP32_IP}/buck/on`)
      .then(r => r.text())
      .then(console.log)
      .catch(err => console.error("Error:", err));
  }

  function buckOff() {
    fetch(`${ESP32_IP}/buck/off`)
      .then(r => r.text())
      .then(console.log)
      .catch(err => console.error("Error:", err));
  }

  function checkLimits() {
    fetch(`${ESP32_IP}/limits`)
      .then(r => r.text())
      .then(alert)
      .catch(err => console.error("Error:", err));
  }

  function getUltrasonic1() {
    fetch(`${ESP32_IP}/ultrasonic/1`)
      .then(r => r.text())
      .then(alert)
      .catch(err => console.error("Error:", err));
  }

  function getUltrasonic2() {
    fetch(`${ESP32_IP}/ultrasonic/2`)
      .then(r => r.text())
      .then(alert)
      .catch(err => console.error("Error:", err));
  }
</script>


</body> 
</html>